<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Arcuz Mobile</title>
    <script src="https://unpkg.com/@ruffle-rs/ruffle"></script>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: sans-serif; touch-action: none; }
        #ruffle { width: 100vw; height: 100vh; }
        .controls { position: absolute; bottom: 20px; width: 100%; display: flex; justify-content: space-between; padding: 0 20px; box-sizing: border-box; pointer-events: none; }
        .btn { width: 60px; height: 60px; background: rgba(255,255,255,0.2); border: 2px solid #fff; border-radius: 50%; 
               display: flex; align-items: center; justify-content: center; color: #fff; pointer-events: auto; user-select: none; font-weight: bold; }
        .btn:active { background: rgba(255,255,255,0.5); }
        .dpad { display: grid; grid-template-columns: repeat(3, 65px); gap: 5px; }
        .actions { display: flex; gap: 15px; align-items: flex-end; }
    </style>
</head>
<body>
    <div id="ruffle"></div>
    <div class="controls">
        <div class="dpad">
            <div></div><div class="btn" id="btn-w">W</div><div></div>
            <div class="btn" id="btn-a">A</div>
            <div class="btn" id="btn-s">S</div>
            <div class="btn" id="btn-d">D</div>
        </div>
        <div class="actions">
            <div class="btn" style="background:rgba(255,0,0,0.5)" id="btn-j">ATK</div>
            <div class="btn" style="background:rgba(0,0,255,0.5)" id="btn-k">JMP</div>
        </div>
    </div>
    <script>
        const ruffle = window.RufflePlayer.newest();
        const player = ruffle.createPlayer();
        document.getElementById("ruffle").appendChild(player);
        
        // This MUST match your file name in the repo exactly
        player.load("Arcuz.swf");

        function simulateKey(key, type) {
            document.dispatchEvent(new KeyboardEvent(type, { key: key, keyCode: key.toUpperCase().charCodeAt(0), bubbles: true }));
        }

        const keys = ['w', 'a', 's', 'd', 'j', 'k'];
        keys.forEach(k => {
            const el = document.getElementById('btn-' + k);
            el.addEventListener('touchstart', (e) => { e.preventDefault(); simulateKey(k, 'keydown'); });
            el.addEventListener('touchend', (e) => { e.preventDefault(); simulateKey(k, 'keyup'); });
        });
    </script>
</body>
</html>
